# Overview

## This is for pre-sales to show how and why we chose to build our app.

## Background

This lab will demonstrate how to utilise Foundation capabilities to  Enterprise challenges. The scenario is a Motor Service Corps that wants to equip service center employees (customer service reps) with mobile apps to improve customer service & cut service times. 

The customer service reps can search on existing customer and previous appointment data pulled from an on-prem CRM, register a new customer, and create new appointments within the app. 

The data is retrieved securely from an on-prem CRM. Access to the API is protected with mobile optimized user authentication, and adapters. 

In this lab we will be focusing on how to access on-prem systems securely.

## App Demo

In this lab, you will learn how to create and integrate an:

- Ionic MobileFirst App with login screen, customer search, add customer, add visits.

- An adapter that does a secure login with the same username/password, utilizing the MFP security framework to manage an OAuth token

- An adapter that retrieves customer/visit info and adds customers/visits securely by utilizing the login OAuth token and ensuring only authenticated apps are able to access backend information

- A NodeJS app that mocks an on-prem CRM with built in rest API to get and post customer and visit information.

- Secure Gateway to access an on-prem CRM from the cloud in a secure manner.

[Small gif showcasing how the app works]


![Iteration 1](https://github.ibm.com/cord-americas/MotoCorpService/blob/pictures/Pasted image at 2016_08_12 04_47 PM.png)


magine you are an Enterprise that owns car service centers. You want to equip service center employees with tablets, and build an app that will help them coordinate activities in the service center to improve service times and quality of service.

The first thing you’ll want to do is expose your business services & data, like the ability to create new customer records or appointments, or view available car parts in inventory, as APIs that can be consumed by your mobile developers. Then you’ll set your mobile team to develop a great app for your employees.

When you go about this project, one of the key considerations you’ll likely encounter is how to protect your enterprise APIs from hackers or from access from unsanctioned users, apps, or devices. To do this, you’ll have to make sure clients calling your APIs are authenticated, and have the required permissions to access these APIs. The MobileFirst Security framework provides the infrastructure that makes it very easy to implement the authentication & authorization logic to protect your APIs when they are accessed from mobile apps, and enforce it at runtime. And the security framework implements the OATH2 protocol, which apart from being the industry standard protocol to protect APIs, also makes it easy to leverage additional security products in your infrastructure.

In this demo app you’ll see a login see a log-in screen where the customer service rep or mechanic will have to enter a valid user name & password to view information about service center customers, create a new entry, or view, edit & create new appointments.

The quick start guide will show you how Foundation simplifies the development of this security behavior (and many other types) so that your development team doesn’t have to go learn OAUTH2, or become security experts, and can also reuse security logic to protect different APIs or in different apps.

In the guide you’ll see that there are server side and client side building blocks called security checks and challenge handlers respectfully. The security checks are server side entities that implement the server side security logic for protecting your APIs - for example issuing a request to the client to supply user name & password credentials, and receiving and validating the credentials against a user registry. The challenge handler is a client side entity that implements the security logic to, in this case, acquire the users credentials when prompted by the server.

If you look at the code, you’ll see that the Security Framework provides classes that already implement most of the technical aspects of the security behavior, so that your developers only have to focus on developing the UI and any custom logic. MobileFirst also takes care of activating the security logic at runtime.

And, after the user successfully passes the requires security checks (or tests), in this case supplying a valid user name & password, the Security Frameworks takes care of the the client-server communication that goes on that ultimately results in the client acquiring an access token for the API.

Furthermore, you’ll see how you can easily specify what security checks are required for access to any given API from the MobileFirst Foundation Console. And how it is possible to change security configurations directly from the console, such as the number of attempts a user gets, or the time before a successful log-in expires, that take effect immediately.

Also, protecting access to APIs from mobile apps extends beyond authenticated users. You will also want to protect your APIs from access from unsanctioned apps. What if a contractor takes your app an reverse engineers it to contain malware? They have a valid user name & password, so they can connect from the app to the backend, and infect your backend systems. But what if you could block access from apps that have been changed or tampered with? MobileFirst Security framework provides protection from unsanctioned apps to connect to your backend, ensuring that only original apps can connect in.

This demo will show you how the MobileFirst Foundation app authenticity feature provides this protection. It is a security check that comes out of the box with Foundation. All you have to do is enable it. And then you can see that if you change something in the app, and then call your APIs - your access is blocked.

</>

Besides protecting access to your APIs from your mobile apps, you’ll probably have to think about how the backend of your app, which you are building on the cloud, can call into databases and applications that installed on-prem in your data centers, or in separate cloud environments. Often security restrictions and firewalls make these data sources & applications challenging to reach.

The Secure Gateway service in Bluemix solves this issue by…

In this demo, you will see how when you leverage the Secure Gateway service to connect to an on-prem CRM system (this demo has a mock CRM DB that you can host on your computer, and exposes data via a REST API) to provide access to the data you need for your motor service center app, you establish a secure connection through a firewall….(we need to think how to demo this - i.e. show that without secure gateway you can’t get through or something…)
